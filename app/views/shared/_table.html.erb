<%# 
  This partial renders a table with the given list of items.
  Required local variables:
  - list: An array of items to be displayed in the table.
  - headers: An array of symbols representing the headers of the table.
  - class_name: (Optional) A string representing the CSS class name to be added to the table container.
  - actions: (Optional) An array of actions to be displayed in the actions column.
  - responsive: (Optional) A boolean representing whether the table should be responsive.
  - id: (Optional) A string representing the id of the table container.
%>

<div id="<%= id if local_assigns[:id] %>" class="<%= class_names + " " if local_assigns[:class_names] %>table__container radius-xl">
  <% responsive = local_assigns[:responsive] || false %>

  <table class="table" data-responsive="<%= responsive %>">
    <thead>
      <% class_name = list.first.class.name.downcase %>

      <% table_headers = header_renderers(class_name) %>

      <tr>
        <% headers.each do |header| %>
          <th class="table__header--<%= header.to_s.downcase %>">
            <%= table_headers[header] ? table_headers[header] : header.to_s.titleize %>
          </th>
        <% end %>
      </tr>
    </thead>

    <%= render 'shared/table_footer', col_span: headers.size, row_count: list.size %>

    <tbody>
      <% actions = local_assigns[:actions] || [] %>

      <% table_data = attribute_renderers(actions) %>

      <% list.each do |item| %>
        <%# Add fulfilled data attribute to the row if the item is an order %>
        <% if item.class.name.downcase == "order" %>
          <% fulfilled = item.fulfilled %>
        <% end %>

        <tr class="table__row table__row--<%= item.class.name.downcase %>" data-fulfilled="<%= fulfilled %>">
          <% headers.each do |attribute| %>
            <td class="table__<%= attribute == :image || attribute == :image ? "image--container" : attribute %>">
              <%= table_data[attribute] ? table_data[attribute].call(item) : item.send(attribute) %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
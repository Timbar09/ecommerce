<svg class="chart__svg" viewBox="0 0 100 100" preserveAspectRatio="none">
  <% if paths[:one_segment] %>
    <circle cx="50" cy="50" r="50" fill="<%= paths[:one_segment_color] %>" />
    <text class="chart__svg--tooltip" x="50" y="50" text-anchor="middle" alignment-baseline="middle">hey</text>
  <% else %>
    <% paths[:paths].each do |path| %>
      <% color = path[:color][:code] %>
      <% hover = path[:color][:light] %>

      <% title = path[:color][:title] %>
      <% text_width = case title.length
        when 1..3 then 20
        when 4..6 then 30
        when 7..9 then 40
        else 50
        end
      %>
      <% text_height = 11 %>
      <% x = path[:color][:x] %>
      <% y = path[:color][:y] %>

      <% stroke = path[:one_segment] ? 'none' : '#ffffff' %>
      <% stroke_width = path[:one_segment] ? 0 : 1 %>

      <% styles = {
        '--pie-color': color, '--pie-hover-color': hover
        }.map { |k, v| "#{k}: #{v}" }.join(';')
      %>

      <path d="<%= path[:path_data] %>" style="<%= styles %>" stroke="<%= stroke %>" stroke-width="<%= stroke_width %>" />
      <rect class="chart__svg--tooltip__bg" x="<%= x - text_width / 2 %>" y="<%= y - text_height / 2 - 2 %>" width="<%= text_width %>" height="<%= text_height %>" opacity="0.7" rx="2" ry="2" />
      <text class="chart__svg--tooltip" x="<%= x %>" y="<%= y %>" text-anchor="middle" alignment-baseline="middle"><%= title %></text>
  <% end %>
<% end %>

</svg>